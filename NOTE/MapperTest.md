# @DBRiderの場合

- `@Dataset`:更新前のテーブル(引数にvalue:初期値のパスを設定)
- `@ExpectedDataSet`:期待値データ(引数にvalue:期待値のパスを設定)
- `@Transactional`:例外が起こった時に自動でロールバックしてくれる

## 考え方

- テストコードに書くメソッドはMapper.javaに書いてあること必須！！
- 検査例外と非検査例外 - 全てのスキーリゾートが取得できること
- 検査例外：プログラマが予想して対応できるエラー。Exceptionクラス配下のRuntime Exception以外のクラスが対象。
- 例外（exception）のうち、メソッドの呼び出し側に`try-catch`文による例外処理の記述が要請されるもの
- 非検査例外：プログラマが予測できないエラー
- RuntimeException:コンパイル時ではなく、プログラム実行時に予期せぬ自体が起こった場合に発生する例外

&#13;&#10;

- 全てのスキーリゾートが取得できること
    - 比較データ（ymlファイル）は1つで良い
    - `hasSize()`内にデータのサイズを書く
    - `.contains()`内に、期待値データを全て書く
- 指定したIDのスキーリゾートが取得できること
    - 初期値と期待値の比較ymlが必要
    - ID指定したテストなので`contains()`内に対象IDのデータを書く
- レコードが存在しない場合に空のListが取得できること
    - 期待値データ(空のymlファイル)のみで良い
- 指定したIDのスキーリゾートを削除すること
    - 比較する必要があるため、初期値と期待値のymlファイルが必要
    - Mapperのメソッド名の引数に削除対象のIDを書く
- 更新時に指定したIDが存在しないときテーブルのレコードが更新されないこと
    - 比較する必要があるため、初期値と期待値のymlファイルが必要(同じデータが良い)
    - Mapperのメソッド名の引数に存在しないIDを書く
- 指定したIDの新規スキーリゾート情報を登録できること
    - 新規登録のため`@ExpectedDataSet`(期待値)は不要
    - 前提条件としてID1のスキーリゾートがデータベースに登録されている->`skiresortMapper`からID1を取得->期待値通りのデータであるかをテストしている
    - `assertThat`:`skiresortMapper`からID1のスキーリゾート情報を取得して、その結果を検証する `.contains`の引数:初期値と同じプロパティを定義する
- 新規のスキーリゾートを登録できること
    - 新規登録のため`@ExpectedDataSet`(期待値)は不要
    - 初期データに含まれないIDの新しいスキーリゾートオブジェクトを作成する

- 削除時に指定したIDが存在しないときテーブルのレコードが削除されないこと
    - 比較する必要があるため、初期値と期待値のymlファイルが必要(同じデータが良い)
    - Mapperのメソッド名の引数に存在しないIDを書く
